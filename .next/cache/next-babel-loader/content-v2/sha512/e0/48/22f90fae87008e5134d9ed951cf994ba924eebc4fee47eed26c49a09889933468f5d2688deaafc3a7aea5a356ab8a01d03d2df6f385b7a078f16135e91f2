{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState } from 'react';\nexport const fetcher = url => fetch(url).then(async res => {\n  const result = await res.json();\n\n  if (res.status !== 200) {\n    return Promise.reject(result);\n  } else {\n    return result;\n  }\n});\nexport function useApiHandler(apiCall) {\n  const {\n    0: reqState,\n    1: setReqState\n  } = useState({\n    error: null,\n    data: null,\n    loading: false\n  });\n\n  const handler = async (...data) => {\n    setReqState({\n      error: null,\n      data: null,\n      loading: true\n    });\n\n    try {\n      const json = await apiCall(...data);\n      setReqState({\n        error: null,\n        data: json.data,\n        loading: false\n      });\n    } catch (e) {\n      const message = e.response && e.response.data.message || 'Ooops, something went wrong...';\n      setReqState({\n        error: message,\n        data: null,\n        loading: false\n      });\n    }\n  };\n\n  return [handler, _objectSpread({}, reqState)];\n}","map":{"version":3,"sources":["/Users/kishonst.clair/Desktop/PortfolioWebsite/kishon-portfolio-website/functions/index.js"],"names":["useState","fetcher","url","fetch","then","res","result","json","status","Promise","reject","useApiHandler","apiCall","reqState","setReqState","error","data","loading","handler","e","message","response"],"mappings":";;;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AAEA,OAAO,MAAMC,OAAO,GAAIC,GAAD,IACrBC,KAAK,CAACD,GAAD,CAAL,CAAWE,IAAX,CAAgB,MAAMC,GAAN,IAAa;AAC3B,QAAMC,MAAM,GAAG,MAAMD,GAAG,CAACE,IAAJ,EAArB;;AAEA,MAAIF,GAAG,CAACG,MAAJ,KAAe,GAAnB,EAAwB;AACtB,WAAOC,OAAO,CAACC,MAAR,CAAeJ,MAAf,CAAP;AACD,GAFD,MAEO;AACL,WAAOA,MAAP;AACD;AACF,CARD,CADK;AAWP,OAAO,SAASK,aAAT,CAAuBC,OAAvB,EAAgC;AACrC,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0Bd,QAAQ,CAAC;AACvCe,IAAAA,KAAK,EAAE,IADgC;AAEvCC,IAAAA,IAAI,EAAE,IAFiC;AAGvCC,IAAAA,OAAO,EAAE;AAH8B,GAAD,CAAxC;;AAMA,QAAMC,OAAO,GAAG,OAAO,GAAGF,IAAV,KAAmB;AACjCF,IAAAA,WAAW,CAAC;AAACC,MAAAA,KAAK,EAAE,IAAR;AAAcC,MAAAA,IAAI,EAAE,IAApB;AAA0BC,MAAAA,OAAO,EAAE;AAAnC,KAAD,CAAX;;AACA,QAAI;AACF,YAAMV,IAAI,GAAG,MAAMK,OAAO,CAAC,GAAGI,IAAJ,CAA1B;AACAF,MAAAA,WAAW,CAAC;AAACC,QAAAA,KAAK,EAAE,IAAR;AAAcC,QAAAA,IAAI,EAAET,IAAI,CAACS,IAAzB;AAA+BC,QAAAA,OAAO,EAAE;AAAxC,OAAD,CAAX;AACD,KAHD,CAGE,OAAME,CAAN,EAAS;AACT,YAAMC,OAAO,GAAID,CAAC,CAACE,QAAF,IAAcF,CAAC,CAACE,QAAF,CAAWL,IAAX,CAAgBI,OAA/B,IAA2C,gCAA3D;AACAN,MAAAA,WAAW,CAAC;AAACC,QAAAA,KAAK,EAAEK,OAAR;AAAiBJ,QAAAA,IAAI,EAAE,IAAvB;AAA6BC,QAAAA,OAAO,EAAE;AAAtC,OAAD,CAAX;AACD;AACF,GATD;;AAWA,SAAO,CAACC,OAAD,oBAAcL,QAAd,EAAP;AACD","sourcesContent":["import { useState } from 'react';\n\nexport const fetcher = (url) =>\n  fetch(url).then(async res => {\n    const result = await res.json();\n\n    if (res.status !== 200) {\n      return Promise.reject(result);\n    } else {\n      return result;\n    }\n  });\n\nexport function useApiHandler(apiCall) {\n  const [reqState, setReqState] = useState({\n    error: null,\n    data: null,\n    loading: false\n  });\n\n  const handler = async (...data) => {\n    setReqState({error: null, data: null, loading: true});\n    try {\n      const json = await apiCall(...data);\n      setReqState({error: null, data: json.data, loading: false});\n    } catch(e) {\n      const message = (e.response && e.response.data.message) || 'Ooops, something went wrong...';\n      setReqState({error: message, data: null, loading: false});\n    }\n  }\n\n  return [handler, {...reqState}]\n}\n"]},"metadata":{},"sourceType":"module"}