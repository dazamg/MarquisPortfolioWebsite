{"ast":null,"code":"import { initAuth0 } from '@auth0/nextjs-auth0';\nconst auth0 = initAuth0({\n  domain: process.env.AUTH0_DOMAIN,\n  clientId: process.env.AUTH0_CLIENTID,\n  clientSecret: process.env.AUTH0_CLIENTSECRET,\n  scope: 'openid profile',\n  redirectUri: process.env.AUTH0_REDIRECT_URI,\n  postLogoutRedirectUri: process.env.AUTH0_POSTLOGOUT_REDIRECT_URI,\n  session: {\n    cookieSecret: process.env.AUTH0_COOKIE_SECRET\n  }\n});\nexport default auth0;\nexport const authorizeUser = async (req, res) => {\n  const session = await auth0.getSession(req);\n\n  if (!session || !session.user) {\n    res.writeHead(302, {\n      Location: '/api/v1/login'\n    });\n    res.end();\n    return null;\n  }\n\n  return session.user;\n};\nexport const withAuth = getData => async ({\n  req,\n  res\n}) => {\n  const session = await auth0.getSession(req);\n\n  if (!session || !session.user) {\n    res.writeHead(302, {\n      Location: '/api/v1/login'\n    });\n    res.end();\n    return {\n      props: {}\n    };\n  }\n\n  const data = getData ? getData() : {};\n  return {\n    props: {\n      user: session.user\n    }\n  };\n};","map":{"version":3,"sources":["/Users/kishonst.clair/Desktop/PortfolioWebsite/kishon-portfolio-website/utils/auth0.js"],"names":["initAuth0","auth0","domain","process","env","AUTH0_DOMAIN","clientId","AUTH0_CLIENTID","clientSecret","AUTH0_CLIENTSECRET","scope","redirectUri","AUTH0_REDIRECT_URI","postLogoutRedirectUri","AUTH0_POSTLOGOUT_REDIRECT_URI","session","cookieSecret","AUTH0_COOKIE_SECRET","authorizeUser","req","res","getSession","user","writeHead","Location","end","withAuth","getData","props","data"],"mappings":"AAAA,SAASA,SAAT,QAA0B,qBAA1B;AAKA,MAAMC,KAAK,GAAGD,SAAS,CAAC;AACtBE,EAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC,YADE;AAEtBC,EAAAA,QAAQ,EAAEH,OAAO,CAACC,GAAR,CAAYG,cAFA;AAGtBC,EAAAA,YAAY,EAAEL,OAAO,CAACC,GAAR,CAAYK,kBAHJ;AAItBC,EAAAA,KAAK,EAAE,gBAJe;AAKtBC,EAAAA,WAAW,EAAER,OAAO,CAACC,GAAR,CAAYQ,kBALH;AAMtBC,EAAAA,qBAAqB,EAAEV,OAAO,CAACC,GAAR,CAAYU,6BANb;AAOtBC,EAAAA,OAAO,EAAE;AACPC,IAAAA,YAAY,EAAEb,OAAO,CAACC,GAAR,CAAYa;AADnB;AAPa,CAAD,CAAvB;AAYA,eAAehB,KAAf;AAEA,OAAO,MAAMiB,aAAa,GAAG,OAAMC,GAAN,EAAWC,GAAX,KAAmB;AAC9C,QAAML,OAAO,GAAG,MAAMd,KAAK,CAACoB,UAAN,CAAiBF,GAAjB,CAAtB;;AACA,MAAI,CAACJ,OAAD,IAAY,CAACA,OAAO,CAACO,IAAzB,EAA+B;AAC7BF,IAAAA,GAAG,CAACG,SAAJ,CAAc,GAAd,EAAmB;AACjBC,MAAAA,QAAQ,EAAE;AADO,KAAnB;AAGAJ,IAAAA,GAAG,CAACK,GAAJ;AACA,WAAO,IAAP;AACD;;AACD,SAAOV,OAAO,CAACO,IAAf;AACD,CAVM;AAYP,OAAO,MAAMI,QAAQ,GAAIC,OAAD,IAAa,OAAM;AAACR,EAAAA,GAAD;AAAMC,EAAAA;AAAN,CAAN,KAAqB;AACxD,QAAML,OAAO,GAAG,MAAMd,KAAK,CAACoB,UAAN,CAAiBF,GAAjB,CAAtB;;AACA,MAAI,CAACJ,OAAD,IAAY,CAACA,OAAO,CAACO,IAAzB,EAA+B;AAC7BF,IAAAA,GAAG,CAACG,SAAJ,CAAc,GAAd,EAAmB;AACjBC,MAAAA,QAAQ,EAAE;AADO,KAAnB;AAGAJ,IAAAA,GAAG,CAACK,GAAJ;AACA,WAAO;AAACG,MAAAA,KAAK,EAAE;AAAR,KAAP;AACD;;AAED,QAAMC,IAAI,GAAGF,OAAO,GAAGA,OAAO,EAAV,GAAe,EAAnC;AACA,SAAO;AAACC,IAAAA,KAAK,EAAE;AAACN,MAAAA,IAAI,EAAEP,OAAO,CAACO;AAAf;AAAR,GAAP;AACD,CAZM","sourcesContent":["import { initAuth0 } from '@auth0/nextjs-auth0';\n\n\n\n\nconst auth0 = initAuth0({\n  domain: process.env.AUTH0_DOMAIN,\n  clientId: process.env.AUTH0_CLIENTID,\n  clientSecret: process.env.AUTH0_CLIENTSECRET,\n  scope: 'openid profile',\n  redirectUri: process.env.AUTH0_REDIRECT_URI,\n  postLogoutRedirectUri: process.env.AUTH0_POSTLOGOUT_REDIRECT_URI,\n  session: {\n    cookieSecret: process.env.AUTH0_COOKIE_SECRET,\n  },\n});\n\nexport default auth0\n\nexport const authorizeUser = async(req, res) => {\n  const session = await auth0.getSession(req);\n  if (!session || !session.user) {\n    res.writeHead(302, {\n      Location: '/api/v1/login'\n    });\n    res.end();\n    return null\n  }\n  return session.user \n}\n\nexport const withAuth = (getData) => async({req, res}) => {\n  const session = await auth0.getSession(req);\n  if (!session || !session.user) {\n    res.writeHead(302, {\n      Location: '/api/v1/login'\n    });\n    res.end();\n    return {props: {}};\n  }\n\n  const data = getData ? getData() : {}\n  return {props: {user: session.user}}\n}\n\n"]},"metadata":{},"sourceType":"module"}