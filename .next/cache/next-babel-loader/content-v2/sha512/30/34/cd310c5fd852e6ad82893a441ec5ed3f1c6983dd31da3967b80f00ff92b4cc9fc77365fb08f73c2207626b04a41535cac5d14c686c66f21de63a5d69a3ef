{"ast":null,"code":"import _defineProperty from \"/Users/kishonst.clair/Desktop/PortfolioWebsite/kishon-portfolio-website/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/kishonst.clair/Desktop/PortfolioWebsite/kishon-portfolio-website/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kishonst.clair/Desktop/PortfolioWebsite/kishon-portfolio-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from 'react';\nexport var fetcher = function fetcher(url) {\n  return fetch(url).then( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return res.json();\n\n            case 2:\n              result = _context.sent;\n\n              if (!(res.status !== 200)) {\n                _context.next = 7;\n                break;\n              }\n\n              return _context.abrupt(\"return\", Promise.reject(result));\n\n            case 7:\n              return _context.abrupt(\"return\", result);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n};\nexport function useApiHandler(apiCall) {\n  _s();\n\n  var _useState = useState({\n    error: null,\n    data: null,\n    loading: false\n  }),\n      reqState = _useState[0],\n      setReqState = _useState[1];\n\n  var handler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var json,\n          message,\n          _args2 = arguments;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setReqState({\n                error: null,\n                data: null,\n                loading: true\n              });\n              _context2.prev = 1;\n              _context2.next = 4;\n              return apiCall.apply(void 0, _args2);\n\n            case 4:\n              json = _context2.sent;\n              setReqState({\n                error: null,\n                data: json.data,\n                loading: false\n              });\n              return _context2.abrupt(\"return\", json.data);\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](1);\n              message = _context2.t0.response && _context2.t0.response.data || 'Ooops, something went wrong...';\n              setReqState({\n                error: message,\n                data: null,\n                loading: false\n              });\n              return _context2.abrupt(\"return\", Promise.reject(message));\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 9]]);\n    }));\n\n    return function handler() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return [handler, _objectSpread({}, reqState)];\n}\n\n_s(useApiHandler, \"n4H21HmOInbQr1YIb/RGiJ3L1/k=\");","map":{"version":3,"sources":["/Users/kishonst.clair/Desktop/PortfolioWebsite/kishon-portfolio-website/functions/index.js"],"names":["useState","fetcher","url","fetch","then","res","json","result","status","Promise","reject","useApiHandler","apiCall","error","data","loading","reqState","setReqState","handler","message","response"],"mappings":";;;;;;;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD;AAAA,SACrBC,KAAK,CAACD,GAAD,CAAL,CAAWE,IAAX;AAAA,wEAAgB,iBAAMC,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACOA,GAAG,CAACC,IAAJ,EADP;;AAAA;AACRC,cAAAA,MADQ;;AAAA,oBAGVF,GAAG,CAACG,MAAJ,KAAe,GAHL;AAAA;AAAA;AAAA;;AAAA,+CAILC,OAAO,CAACC,MAAR,CAAeH,MAAf,CAJK;;AAAA;AAAA,+CAMLA,MANK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAhB;;AAAA;AAAA;AAAA;AAAA,MADqB;AAAA,CAAhB;AAWP,OAAO,SAASI,aAAT,CAAuBC,OAAvB,EAAgC;AAAA;;AAAA,kBACLZ,QAAQ,CAAC;AACvCa,IAAAA,KAAK,EAAE,IADgC;AAEvCC,IAAAA,IAAI,EAAE,IAFiC;AAGvCC,IAAAA,OAAO,EAAE;AAH8B,GAAD,CADH;AAAA,MAC9BC,QAD8B;AAAA,MACpBC,WADoB;;AAOrC,MAAMC,OAAO;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACdD,cAAAA,WAAW,CAAC;AAACJ,gBAAAA,KAAK,EAAE,IAAR;AAAcC,gBAAAA,IAAI,EAAE,IAApB;AAA0BC,gBAAAA,OAAO,EAAE;AAAnC,eAAD,CAAX;AADc;AAAA;AAAA,qBAGOH,OAAO,MAAP,gBAHP;;AAAA;AAGNN,cAAAA,IAHM;AAIZW,cAAAA,WAAW,CAAC;AAACJ,gBAAAA,KAAK,EAAE,IAAR;AAAcC,gBAAAA,IAAI,EAAER,IAAI,CAACQ,IAAzB;AAA+BC,gBAAAA,OAAO,EAAE;AAAxC,eAAD,CAAX;AAJY,gDAKLT,IAAI,CAACQ,IALA;;AAAA;AAAA;AAAA;AAONK,cAAAA,OAPM,GAOK,aAAEC,QAAF,IAAc,aAAEA,QAAF,CAAWN,IAA1B,IAAmC,gCAPvC;AAQZG,cAAAA,WAAW,CAAC;AAACJ,gBAAAA,KAAK,EAAEM,OAAR;AAAiBL,gBAAAA,IAAI,EAAE,IAAvB;AAA6BC,gBAAAA,OAAO,EAAE;AAAtC,eAAD,CAAX;AARY,gDASLN,OAAO,CAACC,MAAR,CAAeS,OAAf,CATK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAPD,OAAO;AAAA;AAAA;AAAA,KAAb;;AAaA,SAAO,CAACA,OAAD,oBAAcF,QAAd,EAAP;AACD;;GArBeL,a","sourcesContent":["import { useState } from 'react';\n\nexport const fetcher = (url) =>\n  fetch(url).then(async res => {\n    const result = await res.json();\n\n    if (res.status !== 200) {\n      return Promise.reject(result);\n    } else {\n      return result;\n    }\n  });\n\nexport function useApiHandler(apiCall) {\n  const [reqState, setReqState] = useState({\n    error: null,\n    data: null,\n    loading: false\n  });\n\n  const handler = async (...data) => {\n    setReqState({error: null, data: null, loading: true});\n    try {\n      const json = await apiCall(...data);\n      setReqState({error: null, data: json.data, loading: false});\n      return json.data;\n    } catch(e) {\n      const message = (e.response && e.response.data) || 'Ooops, something went wrong...';\n      setReqState({error: message, data: null, loading: false});\n      return Promise.reject(message);\n    }\n  }\n\n  return [handler, {...reqState}]\n}\n"]},"metadata":{},"sourceType":"module"}