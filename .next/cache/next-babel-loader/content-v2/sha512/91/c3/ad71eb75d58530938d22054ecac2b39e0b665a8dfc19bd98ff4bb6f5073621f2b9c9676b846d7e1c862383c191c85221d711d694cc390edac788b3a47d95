{"ast":null,"code":"import _regeneratorRuntime from \"/Users/kishonst.clair/Desktop/PortfolioWebsite/kishon-portfolio-website/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kishonst.clair/Desktop/PortfolioWebsite/kishon-portfolio-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { initAuth0 } from '@auth0/nextjs-auth0';\nexport var authorizeUser = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(req, res) {\n    var session;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return auth0.getSession(req);\n\n          case 2:\n            session = _context.sent;\n\n            if (!(!session || !session.user)) {\n              _context.next = 7;\n              break;\n            }\n\n            res.writeHead(302, {\n              Location: '/api/v1/login'\n            });\n            res.end();\n            return _context.abrupt(\"return\", null);\n\n          case 7:\n            return _context.abrupt(\"return\", session.user);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function authorizeUser(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport default initAuth0({\n  domain: process.env.AUTH0_DOMAIN,\n  clientId: process.env.AUTH0_CLIENTID,\n  clientSecret: process.env.AUTH0_CLIENTSECRET,\n  scope: 'openid profile',\n  redirectUri: process.env.AUTH0_REDIRECT_URI,\n  postLogoutRedirectUri: process.env.AUTH0_POSTLOGOUT_REDIRECT_URI,\n  session: {\n    cookieSecret: process.env.AUTH0_COOKIE_SECRET\n  }\n});","map":{"version":3,"sources":["/Users/kishonst.clair/Desktop/PortfolioWebsite/kishon-portfolio-website/utils/auth0.js"],"names":["initAuth0","authorizeUser","req","res","auth0","getSession","session","user","writeHead","Location","end","domain","process","env","AUTH0_DOMAIN","clientId","AUTH0_CLIENTID","clientSecret","AUTH0_CLIENTSECRET","scope","redirectUri","AUTH0_REDIRECT_URI","postLogoutRedirectUri","AUTH0_POSTLOGOUT_REDIRECT_URI","cookieSecret","AUTH0_COOKIE_SECRET"],"mappings":";;AAAA,SAASA,SAAT,QAA0B,qBAA1B;AAGA,OAAO,IAAMC,aAAa;AAAA,sEAAG,iBAAMC,GAAN,EAAWC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACLC,KAAK,CAACC,UAAN,CAAiBH,GAAjB,CADK;;AAAA;AACrBI,YAAAA,OADqB;;AAAA,kBAEzB,CAACA,OAAD,IAAY,CAACA,OAAO,CAACC,IAFI;AAAA;AAAA;AAAA;;AAG3BJ,YAAAA,GAAG,CAACK,SAAJ,CAAc,GAAd,EAAmB;AACjBC,cAAAA,QAAQ,EAAE;AADO,aAAnB;AAGAN,YAAAA,GAAG,CAACO,GAAJ;AAN2B,6CAOpB,IAPoB;;AAAA;AAAA,6CAStBJ,OAAO,CAACC,IATc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbN,aAAa;AAAA;AAAA;AAAA,GAAnB;AAYP,eAAeD,SAAS,CAAC;AACvBW,EAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC,YADG;AAEvBC,EAAAA,QAAQ,EAAEH,OAAO,CAACC,GAAR,CAAYG,cAFC;AAGvBC,EAAAA,YAAY,EAAEL,OAAO,CAACC,GAAR,CAAYK,kBAHH;AAIvBC,EAAAA,KAAK,EAAE,gBAJgB;AAKvBC,EAAAA,WAAW,EAAER,OAAO,CAACC,GAAR,CAAYQ,kBALF;AAMvBC,EAAAA,qBAAqB,EAAEV,OAAO,CAACC,GAAR,CAAYU,6BANZ;AAOvBjB,EAAAA,OAAO,EAAE;AACPkB,IAAAA,YAAY,EAAEZ,OAAO,CAACC,GAAR,CAAYY;AADnB;AAPc,CAAD,CAAxB","sourcesContent":["import { initAuth0 } from '@auth0/nextjs-auth0';\n\n\nexport const authorizeUser = async(req, res) => {\n  const session = await auth0.getSession(req);\nif (!session || !session.user) {\n  res.writeHead(302, {\n    Location: '/api/v1/login'\n  });\n  res.end();\n  return null\n}\nreturn session.user \n}\n\nexport default initAuth0({\n  domain: process.env.AUTH0_DOMAIN,\n  clientId: process.env.AUTH0_CLIENTID,\n  clientSecret: process.env.AUTH0_CLIENTSECRET,\n  scope: 'openid profile',\n  redirectUri: process.env.AUTH0_REDIRECT_URI,\n  postLogoutRedirectUri: process.env.AUTH0_POSTLOGOUT_REDIRECT_URI,\n  session: {\n    cookieSecret: process.env.AUTH0_COOKIE_SECRET,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}